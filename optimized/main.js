var ver,cdnurl;let currentver="v1.0.1";function loadGames(){$("#backarrow").hide(),$.getJSON(cdnurl+"/games.json",(function(e){for(let t=0;t<e.length;t++){let i=$("<div>").prop({class:"game",style:"cursor: pointer;",id:e[t].directory}).append($("<img>").prop({src:cdnurl+"/"+e[t].directory+"/"+e[t].image,alt:e[t].name+" logo"})).append($("<h1>").text(e[t].name));$("#games").append(i)}}))}function redirectGame(e,t){var i=document.createElement("iframe");$("#games").hide(),$("#backarrow").show(),$("#gametitle").show(),$("#gametitle").text(t),i.src=cdnurl+"/"+e+"/index.html",document.body.appendChild(i)}function exitGame(){$("iframe").remove(),$("#backarrow").hide(),$("#gametitle").hide(),$("#games").show()}async function getCDN(){checkVer(),$.getJSON("https://raw.githubusercontent.com/skysthelimitt/selenite-optimized/main/links.json",(async function(e){cdnurls=e.urls;for(let e=0;e<cdnurls.length;e++){if((await(await fetch(cdnurls[e]+"/README.md")).text()).startsWith("## Selenite")){console.log("CDN Found: "+cdnurls[e]),cdnurl=cdnurls[e],loadGames();break}console.log("CDN Blocked: "+cdnurls[e])}cdnurl||alert("looks like none of the cdns are available, please check again later.")}))}async function checkVer(){!(await(await fetch("https://raw.githubusercontent.com/skysthelimitt/selenite-optimized/main/ver")).text()).startsWith(currentver)&&confirm("Your Selenite Optimized version is currently out of date. Click OK to update, or click cancel to continue.")&&window.location.replace("https://raw.githubusercontent.com/skysthelimitt/selenite-optimized/main/build/bookmark.txt")}getCDN(),$.get("https://raw.githubusercontent.com/skysthelimitt/selenite-optimized/main/activelink",(function(e){$("#gametitle").text("sry for this website being so bad, ill work on it eventually - current working link: "+e)})),$(document).ready((function(){$(document).on("click",".game",(function(e){redirectGame($(this).attr("id"),$(this).find("h1").text())}))}));